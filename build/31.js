webpackJsonp([31],{1882:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"CoreLoginInitPageModule",function(){return s});var n=i(0),o=i(4),r=i(2010),a=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},s=function(){function e(){}return e=a([Object(n.I)({declarations:[r.a],imports:[o.l.forChild(r.a)]})],e)}()},2010:function(e,t,i){"use strict";i.d(t,"a",function(){return u});var n=i(0),o=i(4),r=i(954),a=i(9),s=i(79),c=i(2),l=i(30),d=i(71),f=this&&this.__decorate||function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,i,n,o,r){this.navCtrl=e,this.appProvider=t,this.initDelegate=i,this.sitesProvider=n,this.loginHelper=o,this.splashScreen=r}return e.prototype.ionViewDidLoad=function(){var e=this;this.initDelegate.ready().then(function(){var t=e.appProvider.getRedirect();return t.siteId&&t.page&&(e.appProvider.storeRedirect("","",""),Date.now()-t.timemodified<2e4)?t.siteId!=l.a.NO_SITE_ID?e.sitesProvider.loadSite(t.siteId).then(function(){if(!e.loginHelper.isSiteLoggedOut(t.page,t.params))return e.navCtrl.setRoot(t.page,t.params,{animate:!1})}).catch(function(){return e.loadPage()}):e.navCtrl.setRoot(t.page,t.params,{animate:!1}):e.loadPage()}).then(function(){setTimeout(function(){e.splashScreen.hide()},100)})},e.prototype.loadPage=function(){var e=this;return this.sitesProvider.isLoggedIn()?this.loginHelper.isSiteLoggedOut()?this.sitesProvider.logout().then(function(){return e.loadPage()}):this.loginHelper.goToSiteInitialPage():this.sitesProvider.hasSites().then(function(t){return t?e.navCtrl.setRoot("CoreLoginSitesPage"):e.loginHelper.goToAddSite(!0)})},e=f([Object(n.m)({selector:"page-core-login-init",template:'<ion-content>\n    <div class="core-bglogo">\n        <div class="core-logo">\n            <img src="assets/img/splash_logo.png"/>\n            <ion-spinner></ion-spinner>\n        </div>\n    </div>\n</ion-content>\n'}),p("design:paramtypes",[o.q,a.a,s.a,c.a,d.a,r.a])],e)}()}});