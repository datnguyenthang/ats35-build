webpackJsonp([73],{1835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AddonModLessonPlayerPageModule",function(){return d});var o=n(0),s=n(4),i=n(1),a=n(16),r=n(15),l=n(1959),c=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},d=function(){function e(){}return e=c([Object(o.I)({declarations:[l.a],imports:[a.a,r.a,s.l.forChild(l.a),i.b.forChild()]})],e)}()},1959:function(e,t,n){"use strict";n.d(t,"a",function(){return D});var o=n(0),s=n(20),i=n(4),a=n(1),r=n(9),l=n(12),c=n(7),d=n(2),m=n(45),p=n(8),u=n(22),f=n(47),g=n(6),h=n(95),v=n(200),w=n(259),x=n(941),b=this&&this.__decorate||function(e,t,n,o){var s,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},y=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},D=function(){function e(e,t,n,o,s,i,a,r,l,c,d,m,p,u,f,g,v,w,x,b){this.navParams=e,this.translate=n,this.eventsProvider=o,this.sitesProvider=s,this.syncProvider=i,this.domUtils=a,this.timeUtils=l,this.lessonProvider=c,this.lessonHelper=d,this.lessonSync=m,this.lessonOfflineProvider=p,this.cdr=u,this.navCtrl=g,this.appProvider=v,this.utils=w,this.urlUtils=x,this.fb=b,this.component=h.a.COMPONENT,this.LESSON_EOL=h.a.LESSON_EOL,this.forceLeave=!1,this.lessonId=e.get("lessonId"),this.courseId=e.get("courseId"),this.password=e.get("password"),this.review=!!e.get("review"),this.currentPage=e.get("pageId"),this.syncProvider.blockOperation(this.component,this.lessonId),this.menuModal=f.create("AddonModLessonMenuModalPage",{page:this})}return e.prototype.ngOnInit=function(){var e=this;this.fetchLessonData().then(function(t){t&&e.lessonSync.deleteRetakeFinishedInSync(e.lessonId)}).finally(function(){e.loaded=!0})},e.prototype.ngOnDestroy=function(){this.syncProvider.unblockOperation(this.component,this.lessonId)},e.prototype.ionViewCanLeave=function(){return!!this.forceLeave||(!this.question||this.eolData||this.processData||!this.originalData||this.utils.basicLeftCompare(this.questionForm.getRawValue(),this.originalData,3)?Promise.resolve():this.domUtils.showConfirm(this.translate.instant("core.confirmcanceledit")))},e.prototype.buttonClicked=function(e){this.processPage(e)},e.prototype.callFunction=function(e,t,n,o){var s=this;return e.apply(e,t).catch(function(i){return s.offline||s.review||!s.lessonProvider.isLessonOffline(s.lesson)||s.utils.isWebServiceError(i)?Promise.reject(i):(s.offline=!0,s.lessonProvider.getPagesPossibleJumps(s.lesson.id,!0).then(function(i){return s.jumps=i,t[n]=!0,void 0!==o&&(t[o]=s.jumps),e.apply(e,t)}))})},e.prototype.changePage=function(e,t){var n=this;(t||this.eolData||this.currentPage!=e)&&(this.loaded=!0,this.messages=[],this.loadPage(e).catch(function(e){n.domUtils.showErrorModalDefault(e,"Error loading page")}).finally(function(){n.loaded=!0}))},e.prototype.fetchLessonData=function(){var e=this;return this.lessonSync.waitForSync(this.lessonId).then(function(){return e.lessonProvider.getLessonById(e.courseId,e.lessonId)}).then(function(t){return e.lesson=t,e.title=e.lesson.name,e.lessonOfflineProvider.hasOfflineData(e.lessonId)}).then(function(t){return e.offline=t,t||e.appProvider.isOnline()||!e.lessonProvider.isLessonOffline(e.lesson)||e.review||(e.offline=!0),e.callFunction(e.lessonProvider.getAccessInformation.bind(e.lessonProvider),[e.lesson.id,e.offline,!0],1)}).then(function(t){var n=[];return e.accessInfo=t,e.canManage=t.canmanage,e.retake=t.attemptscount,e.showRetake=!e.currentPage&&e.retake>0,t.preventaccessreasons&&t.preventaccessreasons.length&&(!e.password||t.preventaccessreasons.length>1||!e.lessonProvider.isPasswordProtected(t))?Promise.reject(t.preventaccessreasons[0].message):e.review&&e.navParams.get("retake")!=t.attemptscount-1?Promise.reject(e.translate.instant("addon.mod_lesson.errorreviewretakenotlast")):(e.password&&n.push(e.callFunction(e.lessonProvider.getLessonWithPassword.bind(e.lessonProvider),[e.lesson.id,e.password,!0,e.offline,!0],3).then(function(t){e.lesson=t})),e.offline&&n.push(e.lessonProvider.getPagesPossibleJumps(e.lesson.id,!0).then(function(t){e.jumps=t})),Promise.all(n))}).then(function(){return e.mediaFile=e.lesson.mediafiles&&e.lesson.mediafiles[0],e.lessonWidth=e.lesson.slideshow?e.domUtils.formatPixelsSize(e.lesson.mediawidth):"",e.lessonHeight=e.lesson.slideshow?e.domUtils.formatPixelsSize(e.lesson.mediaheight):"",e.launchRetake(e.currentPage)}).then(function(){return!0}).catch(function(t){return(e.review&&e.navParams.get("retake")&&e.utils.isWebServiceError(t)?e.lessonSync.deleteRetakeFinishedInSync(e.lessonId):Promise.resolve()).then(function(){return e.domUtils.showErrorModalDefault(t,"core.course.errorgetmodule",!0),e.forceLeave=!0,e.navCtrl.pop(),!1})})},e.prototype.finishRetake=function(e){var t=this;return this.messages=[],(this.offline&&this.appProvider.isOnline()?this.lessonSync.syncLesson(this.lesson.id,!0,!0).then(function(e){if(e.warnings&&e.warnings.length){var n=e.warnings[0];return t.lessonProvider.getAccessInformation(t.lesson.id).then(function(e){if(e.attemptscount!=t.accessInfo.attemptscount)return t.forceLeave=!0,t.navCtrl.pop(),Promise.reject(n);t.offline=!1,t.domUtils.showErrorModal(n)})}t.offline=!1},function(){}):Promise.resolve()).then(function(){var n=[t.lesson,t.courseId,t.password,e,t.review,t.offline,t.accessInfo];return t.callFunction(t.lessonProvider.finishRetake.bind(t.lessonProvider),n,5)}).then(function(e){if(t.title=t.lesson.name,t.eolData=e.data,t.messages=t.messages.concat(e.messages),t.processData=void 0,t.eolData&&t.eolData.activitylink&&(t.eolData.activitylink.value=t.lessonHelper.formatActivityLink(t.eolData.activitylink.value)),t.eolData&&t.eolData.reviewlesson){var n=t.urlUtils.extractUrlParams(t.eolData.reviewlesson.value);n&&n.pageid?t.eolData.reviewlesson.pageid=n.pageid:delete t.eolData.reviewlesson}})},e.prototype.jumpToPage=function(e){return 0===e?(this.forceLeave=!0,this.navCtrl.pop(),Promise.resolve()):e==h.a.LESSON_EOL?this.finishRetake():(this.messages=[],this.loadPage(e))},e.prototype.launchRetake=function(e){var t=this;return(this.review?Promise.resolve({}):this.offline?this.lessonOfflineProvider.hasFinishedRetake(this.lesson.id).then(function(t){return t&&(e=h.a.LESSON_EOL),{}}):this.lessonProvider.launchRetake(this.lesson.id,this.password,e)).then(function(n){if(t.currentPage=e||t.accessInfo.firstpageid,t.messages=n.messages||[],t.lesson.timelimit&&!t.accessInfo.canmanage)return t.lessonProvider.getTimers(t.lesson.id,!1,!0).then(function(e){t.endTime=e[e.length-1].starttime+t.lesson.timelimit})}).then(function(){return t.loadPage(t.currentPage)})},e.prototype.loadMenu=function(){var e=this;if(!this.loadingMenu){this.loadingMenu=!0;var t=[this.lessonId,this.password,this.offline,!0];return this.callFunction(this.lessonProvider.getPages.bind(this.lessonProvider),t,2).then(function(t){e.lessonPages=t.map(function(e){return e.page})}).catch(function(t){e.domUtils.showErrorModalDefault(t,"Error loading menu.")}).finally(function(){e.loadingMenu=!1})}},e.prototype.loadPage=function(e){var t=this;if(e==h.a.LESSON_EOL)return this.finishRetake();var n=[this.lesson,e,this.password,this.review,!0,this.offline,!0,this.accessInfo,this.jumps];return this.callFunction(this.lessonProvider.getPageData.bind(this.lessonProvider),n,5,8).then(function(n){if(n.newpageid==h.a.LESSON_EOL)return t.finishRetake();t.pageData=n,t.title=n.page.title,t.pageContent=t.lessonHelper.getPageContentsFromPageData(n),t.loaded=!0,t.currentPage=e,t.messages=t.messages.concat(n.messages),t.eolData=t.processData=void 0,t.lessonProvider.isQuestionPage(n.page.type)?(t.questionForm=t.fb.group({}),t.pageButtons=[],t.question=t.lessonHelper.getQuestionFromPageData(t.questionForm,n),t.originalData=t.questionForm.getRawValue()):(t.pageButtons=t.lessonHelper.getPageButtonsFromHtml(n.pagecontent),t.question=void 0,t.originalData=void 0),n.displaymenu&&!t.displayMenu&&t.loadMenu(),t.displayMenu=!!n.displaymenu,t.firstPageLoaded?t.showRetake=!1:t.firstPageLoaded=!0})},e.prototype.processPage=function(e){var t=this;this.loaded=!1;var n=[this.lesson,this.courseId,this.pageData,e,this.password,this.review,this.offline,this.accessInfo,this.jumps];return this.callFunction(this.lessonProvider.processPage.bind(this.lessonProvider),n,6,8).then(function(e){if(!t.offline&&!t.review&&t.lessonProvider.isLessonOffline(t.lesson)){var n=t.accessInfo.attemptscount;t.lessonProvider.isQuestionPage(t.pageData.page.type)?t.lessonProvider.getQuestionsAttemptsOnline(t.lessonId,n,!1,void 0,!1,!0):t.lessonProvider.getContentPagesViewedOnline(t.lessonId,n,!1,!0)}if(e.nodefaultresponse||e.inmediatejump)return t.jumpToPage(e.newpageid);e.feedback=t.lessonHelper.removeQuestionFromFeedback(e.feedback),t.messages=e.messages,t.processData=e,t.processData.buttons=[],!t.lesson.review||e.correctanswer||e.noanswer||e.isessayquestion||e.maxattemptsreached||e.reviewmode||t.processData.buttons.push({label:"addon.mod_lesson.reviewquestionback",pageId:t.currentPage}),t.processData.buttons.push(!t.lesson.review||e.correctanswer||e.noanswer||e.isessayquestion||e.maxattemptsreached?{label:"addon.mod_lesson.continue",pageId:e.newpageid}:{label:"addon.mod_lesson.reviewquestioncontinue",pageId:e.newpageid})}).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error processing page")}).finally(function(){t.loaded=!0})},e.prototype.reviewLesson=function(e){var t=this;this.loaded=!1,this.review=!0,this.offline=!1,this.loadPage(e).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error loading page")}).finally(function(){t.loaded=!0})},e.prototype.submitQuestion=function(){var e=this;this.loaded=!1;var t=this.lessonHelper.prepareQuestionData(this.question,this.questionForm.getRawValue());this.processPage(t).finally(function(){e.loaded=!0})},e.prototype.timeUp=function(){var e=this;this.endTime=void 0,this.loaded=!1,this.finishRetake(!0).catch(function(t){e.domUtils.showErrorModalDefault(t,"Error finishing attempt")}).finally(function(){e.loaded=!0})},b([Object(o._9)(i.f),y("design:type",i.f)],e.prototype,"content",void 0),e=b([Object(o.m)({selector:"page-addon-mod-lesson-player",template:'<ion-header>\n    <ion-navbar>\n        <ion-title><core-format-text [text]="title"></core-format-text></ion-title>\n\n        <ion-buttons end>\n            <button *ngIf="displayMenu || mediaFile" ion-button icon-only [attr.aria-label]="\'addon.mod_lesson.lessonmenu\' | translate" (click)="menuModal.present()">\n                <ion-icon name="bookmark"></ion-icon>\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <core-loading [hideUntil]="loaded">\n        \x3c!-- Info messages. Only show the first one. --\x3e\n        <div class="core-info-card" icon-start *ngIf="lesson && messages && messages.length">\n            <ion-icon name="information-circle"></ion-icon>\n            <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="messages[0].message"></core-format-text>\n        </div>\n\n        <div *ngIf="lesson" [ngClass]=\'{"addon-mod_lesson-slideshow": lesson.slideshow}\' [ngStyle]="{\'width\': lessonWidth, \'height\': lessonHeight}">\n\n            <core-timer *ngIf="endTime" [endTime]="endTime" (finished)="timeUp()" [timerText]="\'addon.mod_lesson.timeremaining\' | translate"></core-timer>\n\n            \x3c!-- Retake and ongoing score. --\x3e\n            <ion-item text-wrap *ngIf="showRetake && !eolData && !processData">\n                <p>{{ \'addon.mod_lesson.attempt\' | translate:{$a: retake} }}</p>\n            </ion-item>\n            <ion-item text-wrap *ngIf="pageData && pageData.ongoingscore && !eolData && !processData" class="addon-mod_lesson-ongoingscore">\n                <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="pageData.ongoingscore"></core-format-text>\n            </ion-item>\n\n            \x3c!-- Page content. --\x3e\n            <ion-card *ngIf="!eolData && !processData">\n                \x3c!-- Content page. --\x3e\n                <ion-item text-wrap *ngIf="!question">\n                    <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="pageContent"></core-format-text>\n                </ion-item>\n\n                \x3c!-- Question page. --\x3e\n                <form *ngIf="question" ion-list [formGroup]="questionForm">\n                    <ion-item-divider text-wrap color="light">\n                        <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="pageContent"></core-format-text>\n                    </ion-item-divider>\n\n                    <input *ngFor="let input of question.hiddenInputs" type="hidden" [name]="input.name" [value]="input.value" />\n\n                    \x3c!-- Render a different input depending on the type of the question. --\x3e\n                    <ng-container [ngSwitch]="question.template">\n\n                        \x3c!-- Short answer. --\x3e\n                        <ng-container *ngSwitchCase="\'shortanswer\'">\n                            <ion-input padding-left [type]="question.input.type" placeholder="{{ \'addon.mod_lesson.youranswer\' | translate }}" [id]="question.input.id" [formControlName]="question.input.name" autocorrect="off" [maxlength]="question.input.maxlength">\n                            </ion-input>\n                        </ng-container>\n\n                        \x3c!-- Essay. --\x3e\n                        <ng-container *ngSwitchCase="\'essay\'">\n                            <ion-item *ngIf="question.textarea">\n                                <core-rich-text-editor item-content placeholder="{{ \'addon.mod_lesson.youranswer\' | translate }}" [control]="question.control" [component]="component" [componentId]="lesson.coursemodule"></core-rich-text-editor>\n                            </ion-item>\n                            <ion-item text-wrap *ngIf="!question.textarea && question.useranswer">\n                                <p class="item-heading">{{ \'addon.mod_lesson.youranswer\' | translate }}</p>\n                                <p><core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="question.useranswer"></core-format-text></p>\n                            </ion-item>\n                        </ng-container>\n\n                        \x3c!-- Multichoice. --\x3e\n                        <ng-container *ngSwitchCase="\'multichoice\'">\n                            \x3c!-- Single choice. --\x3e\n                            <div *ngIf="!question.multi" radio-group [formControlName]="question.controlName">\n                                <ion-item text-wrap *ngFor="let option of question.options">\n                                    <ion-label>\n                                        <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="option.text"></core-format-text>\n                                    </ion-label>\n                                    <ion-radio [id]="option.id" [value]="option.value" [disabled]="option.disabled"></ion-radio>\n                                </ion-item>\n                            </div>\n\n                            \x3c!-- Multiple choice. --\x3e\n                            <ng-container *ngIf="question.multi">\n                                <ion-item text-wrap *ngFor="let option of question.options">\n                                    <ion-label>\n                                        <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="option.text"></core-format-text>\n                                    </ion-label>\n                                    <ion-checkbox [id]="option.id" [formControlName]="option.name" item-end></ion-checkbox>\n                                </ion-item>\n                            </ng-container>\n                        </ng-container>\n\n                        \x3c!-- Matching. --\x3e\n                        <ng-container *ngSwitchCase="\'matching\'">\n                            <ion-item text-wrap *ngFor="let row of question.rows">\n                                <ion-grid item-content>\n                                    <ion-row>\n                                        <ion-col>\n                                            <p><core-format-text id="addon-mod_lesson-matching-{{row.id}}" [component]="component" [componentId]="lesson.coursemodule" [text]="row.text"></core-format-text></p>\n                                        </ion-col>\n                                        <ion-col>\n                                            <ion-select [id]="row.id" [formControlName]="row.name" [attr.aria-labelledby]="\'addon-mod_lesson-matching-\' + row.id" interface="popover">\n                                                <ion-option *ngFor="let option of row.options" [value]="option.value">{{option.label}}</ion-option>\n                                            </ion-select>\n                                        </ion-col>\n                                    </ion-row>\n                                </ion-grid>\n                            </ion-item>\n                        </ng-container>\n                    </ng-container>\n\n                    <ion-item>\n                        <button ion-button block (click)="submitQuestion()" class="button-no-uppercase">{{ question.submitLabel }}</button>\n                    </ion-item>\n                </form>\n            </ion-card>\n\n            \x3c!-- Page buttons and progress. --\x3e\n            <ion-list *ngIf="!eolData && !processData">\n                <ion-grid text-wrap *ngIf="pageButtons && pageButtons.length" class="addon-mod_lesson-pagebuttons">\n                    <ion-row align-items-center>\n                        <ion-col *ngFor="let button of pageButtons" col-12 col-md-6 col-lg-3 col-xl>\n                            <a ion-button block outline text-wrap [id]="button.id" (click)="buttonClicked(button.data)" class="button-no-uppercase">{{ button.content }}</a>\n                        </ion-col>\n                    </ion-row>\n                </ion-grid>\n                <ion-item text-wrap *ngIf="lesson && lesson.progressbar && !canManage && pageData">\n                    <p>{{ \'addon.mod_lesson.progresscompleted\' | translate:{$a: pageData.progress} }}</p>\n                    <core-progress-bar [progress]="pageData.progress"></core-progress-bar>\n                </ion-item>\n                <div class="core-info-card" icon-start *ngIf="lesson && lesson.progressbar && canManage">\n                    <ion-icon name="information-circle"></ion-icon>\n                    {{ \'addon.mod_lesson.progressbarteacherwarning2\' | translate }}\n                </div>\n            </ion-list>\n\n            \x3c!-- End of lesson reached. --\x3e\n            <ion-card *ngIf="eolData && !processData">\n                <div class="core-warning-card" icon-start *ngIf="eolData.offline && eolData.offline.value">\n                    <ion-icon name="warning"></ion-icon>\n                    {{ \'addon.mod_lesson.finishretakeoffline\' | translate }}\n                </div>\n\n                <h3 padding *ngIf="eolData.gradelesson">{{ \'addon.mod_lesson.congratulations\' | translate }}</h3>\n                <ion-item text-wrap *ngIf="eolData.notenoughtimespent">\n                    <core-format-text [text]="eolData.notenoughtimespent.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.numberofpagesviewed">\n                    <core-format-text [text]="eolData.numberofpagesviewed.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.youshouldview">\n                    <core-format-text [text]="eolData.youshouldview.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.numberofcorrectanswers">\n                    <core-format-text [text]="eolData.numberofcorrectanswers.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.displayscorewithessays">\n                    <core-format-text [text]="eolData.displayscorewithessays.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="!eolData.displayscorewithessays && eolData.displayscorewithoutessays">\n                    <core-format-text [text]="eolData.displayscorewithoutessays.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.yourcurrentgradeisoutof">\n                    <core-format-text [text]="eolData.yourcurrentgradeisoutof.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.eolstudentoutoftimenoanswers">\n                    <core-format-text [text]="eolData.eolstudentoutoftimenoanswers.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.welldone">\n                    <core-format-text [text]="eolData.welldone.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="lesson.progressbar && eolData.progresscompleted">\n                    <p>{{ \'addon.mod_lesson.progresscompleted\' | translate:{$a: eolData.progresscompleted.value} }}</p>\n                    <core-progress-bar [progress]="eolData.progresscompleted.value"></core-progress-bar>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.displayofgrade">\n                    <core-format-text [text]="eolData.displayofgrade.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.reviewlesson">\n                    <a ion-button block (click)="reviewLesson(eolData.reviewlesson.pageid)" class="button-no-uppercase">\n                        <core-format-text [text]="\'addon.mod_lesson.reviewlesson\' | translate"></core-format-text>\n                    </a>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.modattemptsnoteacher">\n                    <core-format-text [text]="eolData.modattemptsnoteacher.message"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="eolData.activitylink && eolData.activitylink.value">\n                    <ng-container *ngIf="eolData.activitylink.value.formatted">\n                        \x3c!-- Activity link was successfully formatted, render the button. --\x3e\n                        <a ion-button block color="light" [href]="eolData.activitylink.value.href" core-link [capture]="true" class="button-no-uppercase">\n                            <core-format-text [text]="eolData.activitylink.value.label"></core-format-text>\n                        </a>\n                    </ng-container>\n                    <ng-container *ngIf="!eolData.activitylink.value.formatted">\n                        \x3c!-- Activity link wasn\'t formatted, render the original link. --\x3e\n                        <core-format-text [text]="eolData.activitylink.value.label"></core-format-text>\n                    </ng-container>\n                </ion-item>\n            </ion-card>\n\n            \x3c!-- Feedback returned when processing an action. --\x3e\n            <ion-list *ngIf="processData">\n                <ion-item text-wrap *ngIf="processData.ongoingscore && !processData.reviewmode" >\n                    <core-format-text class="addon-mod_lesson-ongoingscore" [text]="processData.ongoingscore"></core-format-text>\n                </ion-item>\n                <ion-item text-wrap *ngIf="!processData.reviewmode || review">\n                    <p *ngIf="!processData.reviewmode">\n                        <core-format-text [component]="component" [componentId]="lesson.coursemodule" [text]="processData.feedback"></core-format-text>\n                    </p>\n                    <div *ngIf="review">\n                        <p>{{ \'addon.mod_lesson.gotoendoflesson\' | translate }}</p>\n                        <p>{{ \'addon.mod_lesson.or\' | translate }}</p>\n                        <p>{{ \'addon.mod_lesson.continuetonextpage\' | translate }}</p>\n                    </div>\n                </ion-item>\n                <ion-item text-wrap *ngIf="review || (processData.buttons && processData.buttons.length)">\n                    <a ion-button block color="light" *ngIf="review" (click)="changePage(LESSON_EOL)">{{ \'addon.mod_lesson.finish\' | translate }}</a>\n                    <a ion-button block color="light" *ngFor="let button of processData.buttons" (click)="changePage(button.pageId, true)">{{ button.label | translate }}</a>\n                </ion-item>\n            </ion-list>\n        </div>\n    </core-loading>\n</ion-content>\n'}),y("design:paramtypes",[i.r,c.a,a.c,l.a,d.a,m.a,p.a,i.t,u.a,h.a,x.a,w.a,v.a,o.j,i.o,i.q,r.a,g.a,f.a,s.a])],e)}()}});