webpackJsonp([108],{1805:function(n,l,t){"use strict";function u(n){return h._42(0,[(n()(),h._16(0,0,null,null,3,"core-empty-box",[["icon","paper"]],null,null,null,B.b,B.a)),h._15(1,49152,null,0,V.a,[],{message:[0,"message"],icon:[1,"icon"]},null),h._32(131072,j.a,[F.a,h.i]),(n()(),h._40(-1,0,["\n            "]))],function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.submissionstatus_")),"paper")},null)}function i(n){return h._42(0,[(n()(),h._16(0,0,null,null,7,"ion-avatar",[["item-start",""]],null,null,null,null,null)),h._15(1,16384,null,0,H.a,[],null,null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._16(3,0,null,null,3,"img",[["core-external-content",""],["onError","this.src='assets/img/user-avatar.png'"],["role","presentation"]],[[8,"src",4],[8,"alt",0]],null,null,null,null)),h._15(4,4210688,null,0,J.a,[h.p,q.a,z.a,Q.a,S.a,P.a,X.a,Y.a],null,null),h._33(5,{$a:0}),h._32(131072,j.a,[F.a,h.i]),(n()(),h._40(-1,null,["\n                        "]))],null,function(n,l){n(l,3,0,l.parent.context.$implicit.userprofileimageurl,h._41(l,3,1,h._29(l,6).transform("core.pictureof",n(l,5,0,l.parent.context.$implicit.userfullname))))})}function a(n){return h._42(0,[(n()(),h._16(0,0,null,null,1,"h2",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.context.$implicit.userfullname)})}function s(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"h2",[],null,null,null,null,null)),(n()(),h._40(1,null,["","",""])),h._32(131072,j.a,[F.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.hiddenuser")),l.parent.context.$implicit.blindid)})}function e(n){return h._42(0,[(n()(),h._16(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""]))],null,function(n,l){n(l,1,0,l.parent.parent.context.$implicit.groupname)})}function o(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""])),h._32(131072,j.a,[F.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.noteam")))})}function r(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""])),h._32(131072,j.a,[F.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.multipleteams")))})}function _(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"span",[],null,null,null,null,null)),(n()(),h._40(1,null,["",""])),h._32(131072,j.a,[F.a,h.i])],null,function(n,l){n(l,1,0,h._41(l,1,0,h._29(l,2).transform("addon.mod_assign.defaultteam")))})}function d(n){return h._42(0,[(n()(),h._16(0,0,null,null,13,"p",[],null,null,null,null,null)),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,e)),h._15(3,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,o)),h._15(6,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,r)),h._15(9,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                            "])),(n()(),h._11(16777216,null,null,1,null,_)),h._15(12,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n                        "]))],function(n,l){var t=l.component;n(l,3,0,l.parent.context.$implicit.groupname);n(l,6,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&!l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,9,0,t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname&&l.parent.context.$implicit.manyGroups&&!l.parent.context.$implicit.blindid);n(l,12,0,!t.assign.preventsubmissionnotingroup&&!l.parent.context.$implicit.groupname)},null)}function c(n){return h._42(0,[(n()(),h._16(0,0,null,null,2,"ion-badge",[["text-center",""]],null,null,null,null,null)),h._15(1,16384,null,0,nn.a,[ln.a,h.p,h.K],{color:[0,"color"]},null),(n()(),h._40(2,null,["\n                            ","\n                        "]))],function(n,l){n(l,1,0,l.parent.context.$implicit.statusColor)},function(n,l){n(l,2,0,l.parent.context.$implicit.statusTranslated)})}function g(n){return h._42(0,[(n()(),h._16(0,0,null,null,3,"ion-badge",[["text-center",""]],null,null,null,null,null)),h._15(1,16384,null,0,nn.a,[ln.a,h.p,h.K],{color:[0,"color"]},null),(n()(),h._40(2,null,["\n                            ","\n                        "])),h._32(131072,j.a,[F.a,h.i])],function(n,l){n(l,1,0,l.parent.context.$implicit.gradingColor)},function(n,l){n(l,2,0,h._41(l,2,0,h._29(l,3).transform(l.parent.context.$implicit.gradingStatusTranslationId)))})}function m(n){return h._42(0,[(n()(),h._16(0,0,null,null,27,null,null,null,null,null,null,null)),(n()(),h._40(-1,null,["\n                    "])),(n()(),h._16(2,0,null,null,24,"a",[["class","item item-block"],["ion-item",""],["text-wrap",""]],[[2,"core-split-item-selected",null]],[[null,"click"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==n.component.loadSubmission(n.context.$implicit)&&u}return u},tn.b,tn.a)),h._15(3,1097728,null,3,un.a,[an.a,ln.a,h.p,h.K,[2,sn.a]],null,null),h._37(335544320,3,{contentLabel:0}),h._37(603979776,4,{_buttons:1}),h._37(603979776,5,{_icons:1}),h._15(7,16384,null,0,en.a,[],null,null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,0,1,null,i)),h._15(10,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,a)),h._15(13,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,s)),h._15(16,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,d)),h._15(19,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,c)),h._15(22,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                        "])),(n()(),h._11(16777216,null,2,1,null,g)),h._15(25,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,2,["\n                    "])),(n()(),h._40(-1,null,["\n                "]))],function(n,l){var t=l.component;n(l,10,0,l.context.$implicit.userprofileimageurl);n(l,13,0,l.context.$implicit.userfullname);n(l,16,0,!l.context.$implicit.userfullname);n(l,19,0,t.assign.teamsubmission);n(l,22,0,l.context.$implicit.statusTranslated);n(l,25,0,l.context.$implicit.gradingStatusTranslationId)},function(n,l){n(l,2,0,l.context.$implicit.id==l.component.selectedSubmissionId)})}function p(n){return h._42(0,[(n()(),h._16(0,0,null,null,10,"ion-item",[["class","core-warning-card item item-block"],["icon-start",""],["text-wrap",""]],null,null,null,tn.b,tn.a)),h._15(1,1097728,null,3,un.a,[an.a,ln.a,h.p,h.K,[2,sn.a]],null,null),h._37(335544320,6,{contentLabel:0}),h._37(603979776,7,{_buttons:1}),h._37(603979776,8,{_icons:1}),h._15(5,16384,null,0,en.a,[],null,null),(n()(),h._40(-1,2,["\n                    "])),(n()(),h._16(7,0,null,2,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),h._15(8,147456,[[8,4]],0,on.a,[ln.a,h.p,h.K],{name:[0,"name"]},null),(n()(),h._40(9,2,["\n                    ","\n                "])),h._32(131072,j.a,[F.a,h.i])],function(n,l){n(l,8,0,"warning")},function(n,l){n(l,7,0,h._29(l,8)._hidden);n(l,9,0,h._41(l,9,0,h._29(l,10).transform("addon.mod_assign.notallparticipantsareshown")))})}function f(n){return h._42(0,[h._37(402653184,1,{splitviewCtrl:0}),(n()(),h._16(1,0,null,null,15,"ion-header",[],null,null,null,null,null)),h._15(2,16384,null,0,rn.a,[ln.a,h.p,h.K,[2,_n.a]],null,null),(n()(),h._40(-1,null,["\n    "])),(n()(),h._16(4,0,null,null,11,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,dn.b,dn.a)),h._15(5,49152,null,0,cn.a,[gn.a,[2,_n.a],[2,mn.a],ln.a,h.p,h.K],null,null),(n()(),h._40(-1,3,["\n        "])),(n()(),h._16(7,0,null,3,3,"ion-title",[],null,null,null,pn.b,pn.a)),h._15(8,49152,null,0,fn.a,[ln.a,h.p,h.K,[2,hn.a],[2,cn.a]],null,null),(n()(),h._16(9,0,null,0,1,"core-format-text",[],null,null,null,null,null)),h._15(10,540672,null,0,bn.a,[h.p,S.a,P.a,vn.a,F.a,Q.a,In.a,X.a,q.a,z.a,Y.a,xn.a,[2,mn.a],[2,Sn.a]],{text:[0,"text"]},null),(n()(),h._40(-1,3,["\n\n        "])),(n()(),h._16(12,0,null,2,2,"ion-buttons",[["end",""]],null,null,null,null,null)),h._15(13,16384,null,1,Pn.a,[ln.a,h.p,h.K,[2,hn.a],[2,cn.a]],null,null),h._37(603979776,2,{_buttons:1}),(n()(),h._40(-1,3,["\n    "])),(n()(),h._40(-1,null,["\n"])),(n()(),h._40(-1,null,["\n"])),(n()(),h._16(18,0,null,null,32,"core-split-view",[],null,null,null,Tn.b,Tn.a)),h._15(19,114688,[[1,4]],0,C.a,[[2,mn.a],h.p],null,null),(n()(),h._40(-1,0,["\n    "])),(n()(),h._16(21,0,null,0,28,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,$n.b,$n.a)),h._15(22,4374528,null,0,Sn.a,[ln.a,Q.a,An.a,h.p,h.K,gn.a,Cn.a,h.D,[2,_n.a],[2,mn.a]],null,null),(n()(),h._40(-1,1,["\n        "])),(n()(),h._16(24,0,null,2,6,"ion-refresher",[],[[2,"refresher-active",null],[4,"top",null]],[[null,"ionRefresh"]],function(n,l,t){var u=!0;if("ionRefresh"===l){u=!1!==n.component.refreshList(t)&&u}return u},null,null)),h._15(25,212992,null,0,wn.a,[Q.a,Sn.a,h.D,Dn.l],{enabled:[0,"enabled"]},{ionRefresh:"ionRefresh"}),(n()(),h._40(-1,null,["\n            "])),(n()(),h._16(27,0,null,null,2,"ion-refresher-content",[],[[1,"state",0]],null,null,yn.b,yn.a)),h._15(28,114688,null,0,kn.a,[wn.a,ln.a],{pullingText:[0,"pullingText"]},null),h._32(131072,j.a,[F.a,h.i]),(n()(),h._40(-1,null,["\n        "])),(n()(),h._40(-1,1,["\n        "])),(n()(),h._16(32,0,null,1,16,"core-loading",[],null,null,null,On.b,On.a)),h._15(33,638976,null,0,Wn.a,[F.a,h.p],{hideUntil:[0,"hideUntil"]},null),(n()(),h._40(-1,0,["\n            "])),(n()(),h._11(16777216,null,0,1,null,u)),h._15(36,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,0,["\n\n            "])),(n()(),h._16(38,0,null,0,9,"ion-list",[],null,null,null,null,null)),h._15(39,16384,null,0,En.a,[ln.a,h.p,h.K,Q.a,Dn.l,An.a],null,null),(n()(),h._40(-1,null,["\n                "])),(n()(),h._40(-1,null,["\n                "])),(n()(),h._11(16777216,null,null,1,null,m)),h._15(43,802816,null,0,Z.j,[h.W,h.T,h.v],{ngForOf:[0,"ngForOf"]},null),(n()(),h._40(-1,null,["\n\n                "])),(n()(),h._11(16777216,null,null,1,null,p)),h._15(46,16384,null,0,Z.k,[h.W,h.T],{ngIf:[0,"ngIf"]},null),(n()(),h._40(-1,null,["\n            "])),(n()(),h._40(-1,0,["\n        "])),(n()(),h._40(-1,1,["\n    "])),(n()(),h._40(-1,0,["\n"])),(n()(),h._40(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,10,0,t.title),n(l,19,0);n(l,25,0,t.loaded);n(l,28,0,h._19(1,"",h._41(l,28,0,h._29(l,29).transform("core.pulltorefresh")),""));n(l,33,0,t.loaded);n(l,36,0,!t.submissions||0==t.submissions.length);n(l,43,0,t.submissions);n(l,46,0,!t.haveAllParticipants)},function(n,l){n(l,4,0,h._29(l,5)._hidden,h._29(l,5)._sbPadding);n(l,21,0,h._29(l,22).statusbarPadding,h._29(l,22)._hasRefresher);n(l,24,0,"inactive"!==h._29(l,25).state,h._29(l,25)._top);n(l,27,0,h._29(l,28).r.state)})}Object.defineProperty(l,"__esModule",{value:!0});var h=t(1),b=(t(0),t(10),t(6)),v=t(32),I=t(31),x=t(20),S=t(2),P=t(5),T=t(64),$=t(111),A=t(147),C=t(133),w=function(){function n(n,l,t,u,i,a,s,e){var o=this;this.domUtils=u,this.translate=i,this.assignProvider=a,this.assignOfflineProvider=s,this.assignHelper=e,this.moduleId=n.get("moduleId"),this.courseId=n.get("courseId"),this.selectedStatus=n.get("status"),this.title=this.translate.instant(this.selectedStatus?this.selectedStatus==T.a.NEED_GRADING?"addon.mod_assign.numberofsubmissionsneedgrading":"addon.mod_assign.submissionstatus_"+this.selectedStatus:"addon.mod_assign.numberofparticipants"),this.gradedObserver=t.on(T.a.GRADED_EVENT,function(n){o.assign&&n.assignmentId==o.assign.id&&n.userId==l.getCurrentSiteUserId()&&(o.loaded=!1,o.refreshAllData().finally(function(){o.loaded=!0}))},l.getCurrentSiteId())}return n.prototype.ngOnInit=function(){var n=this;this.fetchAssignment().finally(function(){!n.selectedSubmissionId&&n.splitviewCtrl.isOn()&&n.submissions.length>0&&n.loadSubmission(n.submissions[0]),n.loaded=!0})},n.prototype.ionViewCanLeave=function(){if(this.splitviewCtrl.isOn()){var n=this.splitviewCtrl.getDetailsNav().getActive().instance;if(n&&n.ionViewCanLeave)return n.ionViewCanLeave()}return!0},n.prototype.fetchAssignment=function(){var n,l,t=this;return this.assignProvider.getAssignment(this.courseId,this.moduleId).then(function(n){return t.title=n.name||t.title,t.assign=n,t.haveAllParticipants=!0,t.assignProvider.getSubmissions(n.id)}).then(function(u){return u.canviewsubmissions?(l=u,t.assignHelper.getParticipants(t.assign).then(function(l){t.haveAllParticipants=!0,n=l}).catch(function(){t.haveAllParticipants=!1})):Promise.reject(null)}).then(function(){return t.assignProvider.getSubmissionsUserData(l.submissions,t.courseId,t.assign.id,t.assign.blindmarking&&!t.assign.revealidentities,n)}).then(function(n){var l=t.selectedStatus==T.a.NEED_GRADING,u=l?T.a.SUBMISSION_STATUS_SUBMITTED:t.selectedStatus,i=[];return t.submissions=[],n.forEach(function(n){u&&u!=n.status||i.push(t.assignOfflineProvider.getSubmissionGrade(t.assign.id,n.userid).catch(function(){}).then(function(u){var i=!1;return u&&n.timemodified<u.timemodified&&(i=!0),(l?t.assignProvider.needsSubmissionToBeGraded(n,t.assign.id):Promise.resolve(!0)).then(function(l){l&&(n.statusColor=t.assignProvider.getSubmissionStatusColor(n.status),n.gradingColor=t.assignProvider.getSubmissionGradingStatusColor(n.gradingstatus),n.statusTranslated=("success"!=n.statusColor||!n.gradingstatus)&&t.translate.instant("addon.mod_assign.submissionstatus_"+n.status),i?(n.gradingStatusTranslationId="addon.mod_assign.gradenotsynced",n.gradingColor=""):n.gradingStatusTranslationId=("danger"!=n.statusColor||"danger"!=n.gradingColor)&&t.assignProvider.getSubmissionGradingStatusTranslationId(n.gradingstatus),t.submissions.push(n))})}))}),Promise.all(i)}).catch(function(n){t.domUtils.showErrorModalDefault(n,"Error getting assigment data.")})},n.prototype.loadSubmission=function(n){this.selectedSubmissionId===n.id&&this.splitviewCtrl.isOn()||(this.selectedSubmissionId=n.id,this.splitviewCtrl.push("AddonModAssignSubmissionReviewPage",{courseId:this.courseId,moduleId:this.moduleId,submitId:n.submitid,blindId:n.blindid}))},n.prototype.refreshAllData=function(){var n=this,l=[];return l.push(this.assignProvider.invalidateAssignmentData(this.courseId)),this.assign&&(l.push(this.assignProvider.invalidateAllSubmissionData(this.assign.id)),l.push(this.assignProvider.invalidateAssignmentUserMappingsData(this.assign.id)),l.push(this.assignProvider.invalidateListParticipantsData(this.assign.id))),Promise.all(l).finally(function(){return n.fetchAssignment()})},n.prototype.refreshList=function(n){this.refreshAllData().finally(function(){n.complete()})},n.prototype.ngOnDestroy=function(){this.gradedObserver&&this.gradedObserver.off()},n}(),D=function(){return function(){}}(),y=t(1290),k=t(1291),O=t(1292),W=t(1293),E=t(1294),G=t(1295),K=t(1296),U=t(1297),L=t(1298),R=t(1301),M=t(1302),N=t(1303),B=t(160),V=t(134),j=t(28),F=t(17),H=t(177),J=t(158),q=t(4),z=t(16),Q=t(14),X=t(24),Y=t(11),Z=t(9),nn=t(212),ln=t(7),tn=t(34),un=t(21),an=t(19),sn=t(29),en=t(33),on=t(40),rn=t(419),_n=t(35),dn=t(1299),cn=t(191),gn=t(27),mn=t(22),pn=t(1300),fn=t(326),hn=t(237),bn=t(38),vn=t(12),In=t(3),xn=t(23),Sn=t(25),Pn=t(420),Tn=t(423),$n=t(176),An=t(26),Cn=t(97),wn=t(132),Dn=t(36),yn=t(192),kn=t(146),On=t(55),Wn=t(49),En=t(79),Gn=t(58),Kn=h._14({encapsulation:2,styles:[],data:{}}),Un=h._12("page-addon-mod-assign-submission-list",w,function(n){return h._42(0,[(n()(),h._16(0,0,null,null,1,"page-addon-mod-assign-submission-list",[],null,null,null,f,Kn)),h._15(1,245760,null,0,w,[Gn.a,S.a,x.a,P.a,F.a,T.a,$.a,A.a],null,null)],function(n,l){n(l,1,0)},null)},{},{},[]),Ln=t(18),Rn=t(322),Mn=t(323),Nn=t(325),Bn=t(324),Vn=t(418),jn=t(640),Fn=t(107),Hn=t(238);t.d(l,"AddonModAssignSubmissionListPageModuleNgFactory",function(){return Jn});var Jn=h._13(D,[],function(n){return h._25([h._26(512,h.n,h._6,[[8,[y.a,k.a,O.a,W.a,E.a,G.a,K.a,U.a,L.a,R.a,M.a,N.a,Un]],[3,h.n],h.B]),h._26(4608,Z.m,Z.l,[h.x,[2,Z.v]]),h._26(4608,Ln.x,Ln.x,[]),h._26(4608,Ln.d,Ln.d,[]),h._26(4608,Rn.b,Rn.a,[]),h._26(4608,Mn.a,Mn.b,[]),h._26(4608,Nn.b,Nn.a,[]),h._26(4608,Bn.b,Bn.a,[]),h._26(4608,F.a,F.a,[Vn.a,Rn.b,Mn.a,Nn.b,Bn.b,F.b,F.c]),h._26(512,Z.b,Z.b,[]),h._26(512,Ln.v,Ln.v,[]),h._26(512,Ln.i,Ln.i,[]),h._26(512,Ln.s,Ln.s,[]),h._26(512,jn.a,jn.a,[]),h._26(512,b.a,b.a,[]),h._26(512,I.a,I.a,[]),h._26(512,Fn.a,Fn.a,[]),h._26(512,v.a,v.a,[]),h._26(512,jn.b,jn.b,[]),h._26(512,D,D,[]),h._26(256,F.c,void 0,[]),h._26(256,F.b,void 0,[]),h._26(256,Hn.a,w,[])])})}});