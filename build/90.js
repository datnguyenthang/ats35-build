webpackJsonp([90],{1817:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),t.d(a,"AddonModDataSearchPageModule",function(){return h});var n=t(0),o=t(4),i=t(1),r=t(15),s=t(390),d=t(1941),c=t(391),l=this&&this.__decorate||function(e,a,t,n){var o,i=arguments.length,r=i<3?a:null===n?n=Object.getOwnPropertyDescriptor(a,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i<3?o(r):i>3?o(a,t,r):o(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},h=function(){function e(){}return e=l([Object(n.I)({declarations:[d.a],imports:[r.a,s.a,c.a,o.l.forChild(d.a),i.b.forChild()]})],e)}()},1941:function(e,a,t){"use strict";t.d(a,"a",function(){return f});var n=t(0),o=t(4),i=t(20),r=t(6),s=t(8),d=t(11),c=t(390),l=t(62),h=this&&this.__decorate||function(e,a,t,n){var o,i=arguments.length,r=i<3?a:null===n?n=Object.getOwnPropertyDescriptor(a,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,a,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(i<3?o(r):i>3?o(a,t,r):o(a,t))||r);return i>3&&r&&Object.defineProperty(a,t,r),r},m=this&&this.__metadata||function(e,a){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,a)},f=function(){function e(e,a,t,n,o,i,r){var s=this;this.viewCtrl=a,this.utils=n,this.domUtils=o,this.fieldsDelegate=i,this.textUtils=r,this.extraImports=[c.a],this.search=e.get("search"),this.fields=e.get("fields"),this.data=e.get("data");var d={};"object"==typeof this.search.advanced?Object.keys(this.search.advanced).forEach(function(e){void 0!==s.search.advanced[e]&&void 0!==s.search.advanced[e].name?d[s.search.advanced[e].name]=s.search.advanced[e].value?s.textUtils.parseJSON(s.search.advanced[e].value):"":d[e]=s.search.advanced[e]?s.textUtils.parseJSON(s.search.advanced[e]):""}):this.search.advanced.forEach(function(e){d[e.name]=e.value?s.textUtils.parseJSON(e.value):""}),this.search.advanced=d,this.searchForm=t.group({text:[this.search.text],sortBy:[this.search.sortBy||"0"],sortDirection:[this.search.sortDirection||"DESC"],firstname:[this.search.advanced.firstname||""],lastname:[this.search.advanced.lastname||""]}),this.fieldsArray=this.utils.objectToArray(this.fields),this.advancedSearch=this.renderAdvancedSearchFields()}return e.prototype.renderAdvancedSearchFields=function(){if(!this.data.asearchtemplate)return"";this.jsData={fields:this.fields,form:this.searchForm,search:this.search.advanced};var e,a,t=this.data.asearchtemplate;return this.fieldsArray.forEach(function(n){e=(e="[["+n.name+"]]").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e=new RegExp(e,"gi"),t=t.replace(e,a='<addon-mod-data-field-plugin mode="search" [field]="fields['+n.id+']" [form]="form" [search]="search"></addon-mod-data-field-plugin>')}),e=new RegExp("##firstname##","gi"),a='<span [formGroup]="form"><ion-input type="text" name="firstname"         [placeholder]="\'addon.mod_data.authorfirstname\' | translate" formControlName="firstname"></ion-input></span>',t=t.replace(e,a),e=new RegExp("##lastname##","gi"),a='<span [formGroup]="form"><ion-input type="text" name="lastname"         [placeholder]="\'addon.mod_data.authorlastname\' | translate" formControlName="lastname"></ion-input></span>',t=t.replace(e,a)},e.prototype.getSearchDataFromForm=function(e){var a=this,t=[];return this.fieldsArray.forEach(function(n){var o=a.fieldsDelegate.getFieldSearchData(n,e);o&&o.forEach(function(e){e.value=JSON.stringify(e.value),t.push(e)})}),e.firstname&&t.push({name:"firstname",value:JSON.stringify(e.firstname)}),e.lastname&&t.push({name:"lastname",value:JSON.stringify(e.lastname)}),t},e.prototype.closeModal=function(e){this.viewCtrl.dismiss(e)},e.prototype.toggleAdvanced=function(){this.search.searchingAdvanced=!this.search.searchingAdvanced},e.prototype.searchEntries=function(){var e=this.searchForm.value;this.search.searchingAdvanced?(this.search.advanced=this.getSearchDataFromForm(e),this.search.searching=this.search.advanced.length>0):(this.search.text=e.text,this.search.searching=this.search.text.length>0),this.search.sortBy=e.sortBy,this.search.sortDirection=e.sortDirection,this.closeModal(this.search)},e=h([Object(n.m)({selector:"page-addon-mod-data-search",template:'<ion-header>\n    <ion-navbar>\n        <ion-title>{{ \'addon.mod_data.search\' | translate }}</ion-title>\n        <ion-buttons end>\n            <button ion-button icon-only (click)="closeModal()" [attr.aria-label]="\'core.close\' | translate">\n                <ion-icon name="close"></ion-icon>\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header>\n<ion-content>\n    <div class="fixed-content core-tabs-bar">\n        <a class="tab-slide" [attr.aria-selected]="!search.searchingAdvanced" (click)="toggleAdvanced()">{{ \'addon.mod_data.search\' | translate}}</a>\n        <a class="tab-slide" [attr.aria-selected]="search.searchingAdvanced" (click)="toggleAdvanced()">{{ \'addon.mod_data.advancedsearch\' | translate }}</a>\n    </div>\n    <form (ngSubmit)="searchEntries()" [formGroup]="searchForm">\n        <ion-list no-margin>\n            <ion-item [hidden]="search.searchingAdvanced">\n                <ion-input type="text" placeholder="{{ \'addon.mod_data.search\' | translate}}" [(ngModel)]="search.text" name="text" formControlName="text"></ion-input>\n            </ion-item>\n            <ion-item text-wrap>\n                <ion-label stacked>{{ \'core.sortby\' | translate }}</ion-label>\n                <ion-select interface="popover" name="sortBy" formControlName="sortBy">\n                    <optgroup *ngIf="fieldsArray.length" label="{{ \'addon.mod_data.fields\' | translate }}">\n                        <ion-option *ngFor="let field of fieldsArray" [value]="field.id">{{field.name}}</ion-option>\n                    </optgroup>\n                    <optgroup label="{{ \'addon.mod_data.other\' | translate }}">\n                        <ion-option value="0">{{ \'addon.mod_data.timeadded\' | translate }}</ion-option>\n                        <ion-option value="-4">{{ \'addon.mod_data.timemodified\' | translate }}</ion-option>\n                        <ion-option value="-1">{{ \'addon.mod_data.authorfirstname\' | translate }}</ion-option>\n                        <ion-option value="-2">{{ \'addon.mod_data.authorlastname\' | translate }}</ion-option>\n                        <ion-option value="-3" *ngIf="data.approval">{{ \'addon.mod_data.approved\' | translate }}</ion-option>\n                    </optgroup>\n                </ion-select>\n            </ion-item>\n            <ion-list radio-group [(ngModel)]="search.sortDirection" name="sortDirection" formControlName="sortDirection">\n                <ion-item>\n                    <ion-label>{{ \'addon.mod_data.ascending\' | translate }}</ion-label>\n                    <ion-radio value="ASC"></ion-radio>\n                </ion-item>\n                <ion-item>\n                    <ion-label>{{ \'addon.mod_data.descending\' | translate }}</ion-label>\n                    <ion-radio value="DESC"></ion-radio>\n                </ion-item>\n            </ion-list>\n            <div padding [hidden]="!advancedSearch || !search.searchingAdvanced" class="addon-data-advanced-search">\n                <core-compile-html [text]="advancedSearch" [jsData]="jsData" [extraImports]="extraImports"></core-compile-html>\n            </div>\n        </ion-list>\n        <button ion-button block margin type="submit" icon-start>\n            <ion-icon name="search"></ion-icon>\n            {{ \'addon.mod_data.search\' | translate }}\n        </button>\n    </form>\n</ion-content>\n'}),m("design:paramtypes",[o.r,o.B,i.a,r.a,s.a,l.a,d.a])],e)}()}});