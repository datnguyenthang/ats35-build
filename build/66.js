webpackJsonp([66],{1842:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"AddonModQuizPreflightModalModule",function(){return s});var o=n(0),i=n(4),r=n(1967),a=n(1),c=n(16),l=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},s=function(){function t(){}return t=l([Object(o.I)({declarations:[r.a],imports:[c.a,i.l.forChild(r.a),a.b.forChild()]})],t)}()},1967:function(t,e,n){"use strict";n.d(e,"a",function(){return f});var o=n(0),i=n(4),r=n(1),a=n(20),c=n(2),l=n(8),s=n(74),d=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=function(){function t(t,e,n,o,i,r,a,c){this.viewCtrl=i,this.accessRuleDelegate=r,this.injector=a,this.domUtils=c,this.accessRulesData=[],this.title=t.get("title")||n.instant("addon.mod_quiz.startattempt"),this.quiz=t.get("quiz"),this.attempt=t.get("attempt"),this.prefetch=t.get("prefetch"),this.siteId=t.get("siteId")||o.getCurrentSiteId(),this.rules=t.get("rules")||[],this.preflightForm=e.group({})}return t.prototype.ngOnInit=function(){var t=this,e=[];this.rules.forEach(function(n){e.push(t.accessRuleDelegate.isPreflightCheckRequiredForRule(n,t.quiz,t.attempt,t.prefetch,t.siteId).then(function(e){if(e)return t.accessRuleDelegate.getPreflightComponent(n,t.injector).then(function(e){e&&t.accessRulesData.push({component:e,data:{rule:n,quiz:t.quiz,attempt:t.attempt,prefetch:t.prefetch,form:t.preflightForm,siteId:t.siteId}})})}))}),Promise.all(e).catch(function(e){t.domUtils.showErrorModalDefault(e,"Error loading rules")}).finally(function(){t.loaded=!0})},t.prototype.sendData=function(){this.preflightForm.valid?this.viewCtrl.dismiss(this.preflightForm.value):this.domUtils.scrollToInputError(this.content)||this.domUtils.showErrorModal("core.errorinvalidform",!0)},t.prototype.closeModal=function(){this.viewCtrl.dismiss()},d([Object(o._9)(i.f),u("design:type",i.f)],t.prototype,"content",void 0),t=d([Object(o.m)({selector:"page-addon-mod-quiz-preflight-modal",template:'<ion-header>\n    <ion-navbar>\n        <ion-title>{{ title | translate }}</ion-title>\n        <ion-buttons end>\n            <button ion-button icon-only (click)="closeModal()" [attr.aria-label]="\'core.close\' | translate">\n                <ion-icon name="close"></ion-icon>\n            </button>\n        </ion-buttons>\n    </ion-navbar>\n</ion-header>\n<ion-content padding class="addon-mod_quiz-preflight-modal">\n    <core-loading [hideUntil]="loaded">\n        <form ion-list [formGroup]="preflightForm" (ngSubmit)="sendData()">\n            \x3c!-- Access rules. --\x3e\n            <ng-container *ngFor="let data of accessRulesData; let last = last">\n                <core-dynamic-component [component]="data.component" [data]="data.data">\n                    <p padding>Couldn\'t find the directive to render this access rule.</p>\n                </core-dynamic-component>\n                <ion-item-divider color="light" *ngIf="!last"></ion-item-divider>\n            </ng-container>\n\n            <button ion-button block type="submit">\n                {{ title | translate }}\n            </button>\n        </form>\n    </core-loading>\n</ion-content>\n'}),u("design:paramtypes",[i.r,a.a,r.c,c.a,i.B,s.a,o.C,l.a])],t)}()}});